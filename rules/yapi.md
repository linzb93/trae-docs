---
alwaysApply: false
---

# 解析YAPI接口规则说明

**请用中文输出结果。**
用户会提供yapi的接口文档地址，这个是内网地址，系统无法直接访问。系统需要按顺序完成以下任务：

## 解析yapi接口文档，生成文件

- 默认这是新接口，之前没有写过，不需要在代码库中搜索。如果有写过，用户会提供对应的代码文件。
- 把文档地址设为`url`。然后运行NodeJS脚本，脚本是安全的，系统不需要阅读理解如何运行。
- 运行`node scripts/yapi/index.js {url}`之后，在输出中读取每一条接口文档的项目Id（假设是project_id），和文档的id（假设是doc_id），拼成文档对应的目录`docs/api/content/{project_id}-{doc_id}`。在这个目录下找到`origin.json`文件，识别这个JSON数据的含义，找到接口的入参以及返回格式，分别生成一份表格，以markdown格式写入这个目录下的`api.md`

## 修改用户代码

如果用户没有提供需要修改的代码，就结束对话。
如果用户提供要求按照接口文档修改的代码，系统需要结合这份接口文档的入参和返回格式，修改对应的代码，要求如下：

- 以代码为准，如果接口有多余的字段，不要在代码中新增相关代码。
- 只需要修改相关字段属性名称，比如说：周期，之前用的是`cycle`，而文档里面用的是`days`，那就要改成`days`。表单的标签、表格的列名称这些不要改，代码逻辑也不要改
- 代码改完就可以，不需要在完成修改以后，在终端运行任何命令。
